#!/usr/bin/env bash

# Ensure the temporary directory exists
TEMP_DIR='./tmp';
[[ ! -d $TEMP_DIR ]] && mkdir -p $TEMP_DIR;

PID_FILE=${PID_FILE:-./tmp/puma.pid};
PORT=${PORT:-5000};
RACKUP_CONFIG=${RACKUP_CONFIG:-./config.ru};
RACK_ENV=${RACK_ENV:-development};

if [ -n "$DAEMONIZE" ];
then
  puma --port $PORT --environment $RACK_ENV --daemon --pidfile $PID_FILE $RACKUP_CONFIG;
else
  puma --port $PORT --environment $RACK_ENV $RACKUP_CONFIG;
fi
