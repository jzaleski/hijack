#!/usr/bin/env bash

# Ensure the temporary directory exists
TEMP_DIR='./tmp';
[[ ! -d $TEMP_DIR ]] && mkdir -p $TEMP_DIR;

PID_FILE=${PID_FILE:-./tmp/thin.pid};
PORT=${PORT:-5000};
RACK_ENV=${RACK_ENV:-development};

if [ -n "$DAEMONIZE" ]; then
  thin --port $PORT --environment $RACK_ENV --daemon --pid $PID_FILE start;
else
  thin --port $PORT --environment $RACK_ENV start;
fi
